<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Three Cubes Game: Minetest Lua Client Modding API Reference 5.8.0</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Three Cubes Game
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_resources_doc_client_lua_api.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Minetest Lua <a class="el" href="classClient.html">Client</a> Modding API Reference 5.8.0 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>More information at <a href="http://www.minetest.net/">http://www.minetest.net/</a></li>
<li>Developer Wiki: <a href="http://dev.minetest.net/">http://dev.minetest.net/</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md608"></a>
Introduction</h1>
<p>** WARNING: The client API is currently unstable, and may break/change without warning. **</p>
<p>Content and functionality can be added to Minetest 0.4.15-dev+ by using Lua scripting in run-time loaded mods.</p>
<p>A mod is a self-contained bunch of scripts, textures and other related things that is loaded by and interfaces with Minetest.</p>
<p>Transferring client-sided mods from the server to the client is planned, but not implemented yet.</p>
<p>If you see a deficiency in the API, feel free to attempt to add the functionality in the engine and API. You can send such improvements as source code patches on GitHub (<a href="https://github.com/minetest/minetest">https://github.com/minetest/minetest</a>).</p>
<h1><a class="anchor" id="autotoc_md609"></a>
Programming in Lua</h1>
<p>If you have any difficulty in understanding this, please read <a href="http://www.lua.org/pil/">Programming in Lua</a>.</p>
<h1><a class="anchor" id="autotoc_md610"></a>
Startup</h1>
<p>Mods are loaded during client startup from the mod load paths by running the <code>init.lua</code> scripts in a shared environment.</p>
<p>In order to load client-side mods, the following conditions need to be satisfied:</p>
<p>1) <code>$path_user/minetest.conf</code> contains the setting <code>enable_client_modding = true</code></p>
<p>2) The client-side mod located in <code>$path_user/clientmods/&lt;modname&gt;</code> is added to <code>$path_user/clientmods/mods.conf</code> as <code>load_mod_&lt;modname&gt; = true</code>.</p>
<p>Note: Depending on the remote server's settings, client-side mods might not be loaded or have limited functionality. See setting <code>csm_restriction_flags</code> for reference.</p>
<h1><a class="anchor" id="autotoc_md611"></a>
Paths</h1>
<ul>
<li><code>RUN_IN_PLACE=1</code> (Windows release, local build)<ul>
<li><code>$path_user</code>: <code>&lt;build directory&gt;</code></li>
<li><code>$path_share</code>: <code>&lt;build directory&gt;</code></li>
</ul>
</li>
<li><code>RUN_IN_PLACE=0</code>: (Linux release)<ul>
<li><code>$path_share</code>:<ul>
<li>Linux: <code>/usr/share/minetest</code></li>
<li>Windows: <code>&lt;install directory&gt;/minetest-0.4.x</code></li>
</ul>
</li>
<li><code>$path_user</code>:<ul>
<li>Linux: <code>$HOME/.minetest</code></li>
<li>Windows: <code>C:/users/&lt;user&gt;/AppData/minetest</code> (maybe)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md612"></a>
Mod load path</h1>
<p>Generic:</p>
<ul>
<li><code>$path_share/clientmods/</code></li>
<li><code>$path_user/clientmods/</code> (User-installed mods)</li>
</ul>
<p>In a run-in-place version (e.g. the distributed windows version):</p>
<ul>
<li><code>minetest-0.4.x/clientmods/</code> (User-installed mods)</li>
</ul>
<p>On an installed version on Linux:</p>
<ul>
<li><code>/usr/share/minetest/clientmods/</code></li>
<li><code>$HOME/.minetest/clientmods/</code> (User-installed mods)</li>
</ul>
<h1><a class="anchor" id="autotoc_md613"></a>
Modpack support</h1>
<p>Mods can be put in a subdirectory, if the parent directory, which otherwise should be a mod, contains a file named <code>modpack.conf</code>. The file is a key-value store of modpack details.</p>
<ul>
<li><code>name</code>: The modpack name.</li>
<li><code>description</code>: Description of mod to be shown in the Mods tab of the main menu.</li>
</ul>
<h1><a class="anchor" id="autotoc_md614"></a>
Mod directory structure</h1>
<pre class="fragment">clientmods
├── modname
│   ├── mod.conf
│   ├── init.lua
└── another
</pre><h2><a class="anchor" id="autotoc_md615"></a>
modname</h2>
<p>The location of this directory.</p>
<h2><a class="anchor" id="autotoc_md616"></a>
mod.conf</h2>
<p>An (optional) settings file that provides meta information about the mod.</p>
<ul>
<li><code>name</code>: The mod name. Allows Minetest to determine the mod name even if the folder is wrongly named.</li>
<li><code>description</code>: Description of mod to be shown in the Mods tab of the main menu.</li>
<li><code>depends</code>: A comma separated list of dependencies. These are mods that must be loaded before this mod.</li>
<li><code>optional_depends</code>: A comma separated list of optional dependencies. Like a dependency, but no error if the mod doesn't exist.</li>
</ul>
<h2><a class="anchor" id="autotoc_md617"></a>
&lt;tt&gt;init.lua&lt;/tt&gt;</h2>
<p>The main Lua script. Running this script should register everything it wants to register. Subsequent execution depends on minetest calling the registered callbacks.</p>
<p><b>NOTE</b>: <a class="el" href="classClient.html">Client</a> mods currently can't provide textures, sounds, or models by themselves. Any media referenced in function calls must already be loaded (provided by mods that exist on the server).</p>
<h1><a class="anchor" id="autotoc_md618"></a>
Naming convention for registered textual names</h1>
<p>Registered names should generally be in this format: </p><pre class="fragment">"modname:&lt;whatever&gt;" (&lt;whatever&gt; can have characters a-zA-Z0-9_)
</pre><p>This is to prevent conflicting names from corrupting maps and is enforced by the mod loader.</p>
<h2><a class="anchor" id="autotoc_md619"></a>
Example</h2>
<p>In the mod <code>experimental</code>, there is the ideal item/node/entity name <code>tnt</code>. So the name should be <code>experimental:tnt</code>.</p>
<p>Enforcement can be overridden by prefixing the name with <code>:</code>. This can be used for overriding the registrations of some other mod.</p>
<p>Example: Any mod can redefine <code>experimental:tnt</code> by using the name </p><pre class="fragment">:experimental:tnt
</pre><p>when registering it. (also that mod is required to have <code>experimental</code> as a dependency)</p>
<p>The <code>:</code> prefix can also be used for maintaining backwards compatibility.</p>
<h1><a class="anchor" id="autotoc_md620"></a>
Sounds</h1>
<p><b>NOTE: Connecting sounds to objects is not implemented.</b></p>
<p>Only Ogg Vorbis files are supported.</p>
<p>For positional playing of sounds, only single-channel (mono) files are supported. Otherwise OpenAL will play them non-positionally.</p>
<p>Mods should generally prefix their sounds with <code>modname_</code>, e.g. given the mod name "`foomod`", a sound could be called: </p><pre class="fragment">foomod_foosound.ogg
</pre><p>Sounds are referred to by their name with a dot, a single digit and the file extension stripped out. When a sound is played, the actual sound file is chosen randomly from the matching sounds.</p>
<p>When playing the sound <code>foomod_foosound</code>, the sound is chosen randomly from the available ones of the following files:</p>
<ul>
<li><code>foomod_foosound.ogg</code></li>
<li><code>foomod_foosound.0.ogg</code></li>
<li><code>foomod_foosound.1.ogg</code></li>
<li>(...)</li>
<li><code>foomod_foosound.9.ogg</code></li>
</ul>
<p>Examples of sound parameter tables:</p>
<div class="fragment"><div class="line">-- Play locationless</div>
<div class="line">{</div>
<div class="line">    gain = 1.0, -- default</div>
<div class="line">}</div>
<div class="line">-- Play locationless, looped</div>
<div class="line">{</div>
<div class="line">    gain = 1.0, -- default</div>
<div class="line">    loop = true,</div>
<div class="line">}</div>
<div class="line">-- Play in a location</div>
<div class="line">{</div>
<div class="line">    pos = {x = 1, y = 2, z = 3},</div>
<div class="line">    gain = 1.0, -- default</div>
<div class="line">}</div>
<div class="line">-- Play connected to an object, looped</div>
<div class="line">{</div>
<div class="line">    object = &lt;an ObjectRef&gt;,</div>
<div class="line">    gain = 1.0, -- default</div>
<div class="line">    loop = true,</div>
<div class="line">}</div>
</div><!-- fragment --><p>Looped sounds must either be connected to an object or played locationless.</p>
<h2><a class="anchor" id="autotoc_md621"></a>
SimpleSoundSpec</h2>
<ul>
<li>e.g. <code>""</code></li>
<li>e.g. <code>"default_place_node"</code></li>
<li>e.g. <code>{}</code></li>
<li>e.g. <code>{name = "default_place_node"}</code></li>
<li>e.g. <code>{name = "default_place_node", gain = 1.0}</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md622"></a>
Representations of simple things</h1>
<h2><a class="anchor" id="autotoc_md623"></a>
Position/vector</h2>
<div class="fragment"><div class="line">{x=num, y=num, z=num}</div>
</div><!-- fragment --><p>For helper functions see "Vector helpers".</p>
<h2><a class="anchor" id="autotoc_md624"></a>
pointed_thing</h2>
<ul>
<li><code>{type="nothing"}</code></li>
<li><code>{type="node", under=pos, above=pos}</code></li>
<li><code>{type="object", id=ObjectID}</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md625"></a>
Flag Specifier Format</h1>
<p>Flags using the standardized flag specifier format can be specified in either of two ways, by string or table.</p>
<p>The string format is a comma-delimited set of flag names; whitespace and unrecognized flag fields are ignored. Specifying a flag in the string sets the flag, and specifying a flag prefixed by the string <code>"no"</code> explicitly clears the flag from whatever the default may be.</p>
<p>In addition to the standard string flag format, the schematic flags field can also be a table of flag names to boolean values representing whether or not the flag is set. Additionally, if a field with the flag name prefixed with <code>"no"</code> is present, mapped to a boolean of any value, the specified flag is unset.</p>
<p>E.g. A flag field of value</p>
<div class="fragment"><div class="line">{place_center_x = true, place_center_y=false, place_center_z=true}</div>
</div><!-- fragment --><p>is equivalent to</p>
<div class="fragment"><div class="line">{place_center_x = true, noplace_center_y=true, place_center_z=true}</div>
</div><!-- fragment --><p>which is equivalent to</p>
<div class="fragment"><div class="line">&quot;place_center_x, noplace_center_y, place_center_z&quot;</div>
</div><!-- fragment --><p>or even</p>
<div class="fragment"><div class="line">&quot;place_center_x, place_center_z&quot;</div>
</div><!-- fragment --><p>since, by default, no schematic attributes are set.</p>
<h1><a class="anchor" id="autotoc_md626"></a>
Formspec</h1>
<p>Formspec defines a menu. It is a string, with a somewhat strange format.</p>
<p>Spaces and newlines can be inserted between the blocks, as is used in the examples.</p>
<h2><a class="anchor" id="autotoc_md627"></a>
Examples</h2>
<h3><a class="anchor" id="autotoc_md628"></a>
Chest</h3>
<pre class="fragment">size[8,9]
list[context;main;0,0;8,4;]
list[current_player;main;0,5;8,4;]
</pre><h3><a class="anchor" id="autotoc_md629"></a>
Furnace</h3>
<pre class="fragment">size[8,9]
list[context;fuel;2,3;1,1;]
list[context;src;2,1;1,1;]
list[context;dst;5,1;2,2;]
list[current_player;main;0,5;8,4;]
</pre><h3><a class="anchor" id="autotoc_md630"></a>
Minecraft-like player inventory</h3>
<pre class="fragment">size[8,7.5]
image[1,0.6;1,2;player.png]
list[current_player;main;0,3.5;8,4;]
list[current_player;craft;3,0;3,3;]
list[current_player;craftpreview;7,1;1,1;]
</pre><h2><a class="anchor" id="autotoc_md631"></a>
Elements</h2>
<h3><a class="anchor" id="autotoc_md632"></a>
&lt;tt&gt;size[&lt;W&gt;,&lt;H&gt;,&lt;fixed_size&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Define the size of the menu in inventory slots</li>
<li><code>fixed_size</code>: <code>true</code>/<code>false</code> (optional)</li>
<li>deprecated: <code>invsize[&lt;W&gt;,&lt;H&gt;;]</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md633"></a>
&lt;tt&gt;container[&lt;X&gt;,&lt;Y&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Start of a container block, moves all physical elements in the container by (X, Y)</li>
<li>Must have matching container_end</li>
<li>Containers can be nested, in which case the offsets are added (child containers are relative to parent containers)</li>
</ul>
<h3><a class="anchor" id="autotoc_md634"></a>
&lt;tt&gt;container_end[]&lt;/tt&gt;</h3>
<ul>
<li>End of a container, following elements are no longer relative to this container</li>
</ul>
<h3><a class="anchor" id="autotoc_md635"></a>
&lt;tt&gt;list[&lt;inventory location&gt;;&lt;list name&gt;;&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;]&lt;/tt&gt;</h3>
<ul>
<li>Show an inventory list</li>
</ul>
<h3><a class="anchor" id="autotoc_md636"></a>
&lt;tt&gt;list[&lt;inventory location&gt;;&lt;list name&gt;;&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;starting item index&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Show an inventory list</li>
</ul>
<h3><a class="anchor" id="autotoc_md637"></a>
&lt;tt&gt;listring[&lt;inventory location&gt;;&lt;list name&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Allows to create a ring of inventory lists</li>
<li>Shift-clicking on items in one element of the ring will send them to the next inventory list inside the ring</li>
<li>The first occurrence of an element inside the ring will determine the inventory where items will be sent to</li>
</ul>
<h3><a class="anchor" id="autotoc_md638"></a>
&lt;tt&gt;listring[]&lt;/tt&gt;</h3>
<ul>
<li>Shorthand for doing <code>listring[&lt;inventory location&gt;;&lt;list name&gt;]</code> for the last two inventory lists added by list[...]</li>
</ul>
<h3><a class="anchor" id="autotoc_md639"></a>
&lt;tt&gt;listcolors[&lt;slot_bg_normal&gt;;&lt;slot_bg_hover&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Sets background color of slots as <code>ColorString</code></li>
<li>Sets background color of slots on mouse hovering</li>
</ul>
<h3><a class="anchor" id="autotoc_md640"></a>
&lt;tt&gt;listcolors[&lt;slot_bg_normal&gt;;&lt;slot_bg_hover&gt;;&lt;slot_border&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Sets background color of slots as <code>ColorString</code></li>
<li>Sets background color of slots on mouse hovering</li>
<li>Sets color of slots border</li>
</ul>
<h3><a class="anchor" id="autotoc_md641"></a>
&lt;tt&gt;listcolors[&lt;slot_bg_normal&gt;;&lt;slot_bg_hover&gt;;&lt;slot_border&gt;;&lt;tooltip_bgcolor&gt;;&lt;tooltip_fontcolor&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Sets background color of slots as <code>ColorString</code></li>
<li>Sets background color of slots on mouse hovering</li>
<li>Sets color of slots border</li>
<li>Sets default background color of tooltips</li>
<li>Sets default font color of tooltips</li>
</ul>
<h3><a class="anchor" id="autotoc_md642"></a>
&lt;tt&gt;tooltip[&lt;gui_element_name&gt;;&lt;tooltip_text&gt;;&lt;bgcolor&gt;,&lt;fontcolor&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Adds tooltip for an element</li>
<li><code>&lt;bgcolor&gt;</code> tooltip background color as <code>ColorString</code> (optional)</li>
<li><code>&lt;fontcolor&gt;</code> tooltip font color as <code>ColorString</code> (optional)</li>
</ul>
<h3><a class="anchor" id="autotoc_md643"></a>
&lt;tt&gt;image[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;texture name&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Show an image</li>
<li>Position and size units are inventory slots</li>
</ul>
<h3><a class="anchor" id="autotoc_md644"></a>
&lt;tt&gt;item_image[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;item name&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Show an inventory image of registered item/node</li>
<li>Position and size units are inventory slots</li>
</ul>
<h3><a class="anchor" id="autotoc_md645"></a>
&lt;tt&gt;bgcolor[&lt;color&gt;;&lt;fullscreen&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Sets background color of formspec as <code>ColorString</code></li>
<li>If <code>true</code>, the background color is drawn fullscreen (does not affect the size of the formspec)</li>
</ul>
<h3><a class="anchor" id="autotoc_md646"></a>
&lt;tt&gt;background[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;texture name&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Use a background. <a class="el" href="classInventory.html">Inventory</a> rectangles are not drawn then.</li>
<li>Position and size units are inventory slots</li>
<li>Example for formspec 8x4 in 16x resolution: image shall be sized 8 times 16px times 4 times 16px.</li>
</ul>
<h3><a class="anchor" id="autotoc_md647"></a>
&lt;tt&gt;background[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;texture name&gt;;&lt;auto_clip&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Use a background. <a class="el" href="classInventory.html">Inventory</a> rectangles are not drawn then.</li>
<li>Position and size units are inventory slots</li>
<li>Example for formspec 8x4 in 16x resolution: image shall be sized 8 times 16px times 4 times 16px</li>
<li>If <code>true</code> the background is clipped to formspec size (<code>x</code> and <code>y</code> are used as offset values, <code>w</code> and <code>h</code> are ignored)</li>
</ul>
<h3><a class="anchor" id="autotoc_md648"></a>
&lt;tt&gt;pwdfield[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;name&gt;;&lt;label&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Textual password style field; will be sent to server when a button is clicked</li>
<li>When enter is pressed in field, fields.key_enter_field will be sent with the name of this field.</li>
<li><code>x</code> and <code>y</code> position the field relative to the top left of the menu</li>
<li><code>w</code> and <code>h</code> are the size of the field</li>
<li>Fields are a set height, but will be vertically centered on <code>h</code></li>
<li>Position and size units are inventory slots</li>
<li><code>name</code> is the name of the field as returned in fields to <code>on_receive_fields</code></li>
<li><code>label</code>, if not blank, will be text printed on the top left above the field</li>
<li>See field_close_on_enter to stop enter closing the formspec</li>
</ul>
<h3><a class="anchor" id="autotoc_md649"></a>
&lt;tt&gt;field[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;name&gt;;&lt;label&gt;;&lt;default&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Textual field; will be sent to server when a button is clicked</li>
<li>When enter is pressed in field, fields.key_enter_field will be sent with the name of this field.</li>
<li><code>x</code> and <code>y</code> position the field relative to the top left of the menu</li>
<li><code>w</code> and <code>h</code> are the size of the field</li>
<li>Fields are a set height, but will be vertically centered on <code>h</code></li>
<li>Position and size units are inventory slots</li>
<li><code>name</code> is the name of the field as returned in fields to <code>on_receive_fields</code></li>
<li><code>label</code>, if not blank, will be text printed on the top left above the field</li>
<li><code>default</code> is the default value of the field<ul>
<li><code>default</code> may contain variable references such as &lsquo;${text}&rsquo;<code>which will fill the value from the metadata value</code>text`</li>
<li><b>Note</b>: no extra text or more than a single variable is supported ATM.</li>
</ul>
</li>
<li>See field_close_on_enter to stop enter closing the formspec</li>
</ul>
<h3><a class="anchor" id="autotoc_md650"></a>
&lt;tt&gt;field[&lt;name&gt;;&lt;label&gt;;&lt;default&gt;]&lt;/tt&gt;</h3>
<ul>
<li>As above, but without position/size units</li>
<li>When enter is pressed in field, fields.key_enter_field will be sent with the name of this field.</li>
<li>Special field for creating simple forms, such as sign text input</li>
<li>Must be used without a <code>size[]</code> element</li>
<li>A "Proceed" button will be added automatically</li>
<li>See field_close_on_enter to stop enter closing the formspec</li>
</ul>
<h3><a class="anchor" id="autotoc_md651"></a>
&lt;tt&gt;field_close_on_enter[&lt;name&gt;;&lt;close_on_enter&gt;]&lt;/tt&gt;</h3>
<ul>
<li>&lt;name&gt; is the name of the field</li>
<li>if &lt;close_on_enter&gt; is false, pressing enter in the field will submit the form but not close it</li>
<li>defaults to true when not specified (ie: no tag for a field)</li>
</ul>
<h3><a class="anchor" id="autotoc_md652"></a>
&lt;tt&gt;textarea[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;name&gt;;&lt;label&gt;;&lt;default&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Same as fields above, but with multi-line input</li>
</ul>
<h3><a class="anchor" id="autotoc_md653"></a>
&lt;tt&gt;label[&lt;X&gt;,&lt;Y&gt;;&lt;label&gt;]&lt;/tt&gt;</h3>
<ul>
<li><code>x</code> and <code>y</code> work as per field</li>
<li><code>label</code> is the text on the label</li>
<li>Position and size units are inventory slots</li>
</ul>
<h3><a class="anchor" id="autotoc_md654"></a>
&lt;tt&gt;vertlabel[&lt;X&gt;,&lt;Y&gt;;&lt;label&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Textual label drawn vertically</li>
<li><code>x</code> and <code>y</code> work as per field</li>
<li><code>label</code> is the text on the label</li>
<li>Position and size units are inventory slots</li>
</ul>
<h3><a class="anchor" id="autotoc_md655"></a>
&lt;tt&gt;button[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;name&gt;;&lt;label&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Clickable button. When clicked, fields will be sent.</li>
<li><code>x</code>, <code>y</code> and <code>name</code> work as per field</li>
<li><code>w</code> and <code>h</code> are the size of the button</li>
<li>Fixed button height. It will be vertically centered on <code>h</code></li>
<li><code>label</code> is the text on the button</li>
<li>Position and size units are inventory slots</li>
</ul>
<h3><a class="anchor" id="autotoc_md656"></a>
&lt;tt&gt;image_button[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;texture name&gt;;&lt;name&gt;;&lt;label&gt;]&lt;/tt&gt;</h3>
<ul>
<li><code>x</code>, <code>y</code>, <code>w</code>, <code>h</code>, and <code>name</code> work as per button</li>
<li><code>texture name</code> is the filename of an image</li>
<li>Position and size units are inventory slots</li>
</ul>
<h3><a class="anchor" id="autotoc_md657"></a>
&lt;tt&gt;image_button[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;texture name&gt;;&lt;name&gt;;&lt;label&gt;;&lt;noclip&gt;;&lt;drawborder&gt;;&lt;pressed texture name&gt;]&lt;/tt&gt;</h3>
<ul>
<li><code>x</code>, <code>y</code>, <code>w</code>, <code>h</code>, and <code>name</code> work as per button</li>
<li><code>texture name</code> is the filename of an image</li>
<li>Position and size units are inventory slots</li>
<li><code>noclip=true</code> means the image button doesn't need to be within specified formsize</li>
<li><code>drawborder</code>: draw button border or not</li>
<li><code>pressed texture name</code> is the filename of an image on pressed state</li>
</ul>
<h3><a class="anchor" id="autotoc_md658"></a>
&lt;tt&gt;item_image_button[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;item name&gt;;&lt;name&gt;;&lt;label&gt;]&lt;/tt&gt;</h3>
<ul>
<li><code>x</code>, <code>y</code>, <code>w</code>, <code>h</code>, <code>name</code> and <code>label</code> work as per button</li>
<li><code>item name</code> is the registered name of an item/node, tooltip will be made out of its description to override it use tooltip element</li>
<li>Position and size units are inventory slots</li>
</ul>
<h3><a class="anchor" id="autotoc_md659"></a>
&lt;tt&gt;button_exit[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;name&gt;;&lt;label&gt;]&lt;/tt&gt;</h3>
<ul>
<li>When clicked, fields will be sent and the form will quit.</li>
</ul>
<h3><a class="anchor" id="autotoc_md660"></a>
&lt;tt&gt;image_button_exit[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;texture name&gt;;&lt;name&gt;;&lt;label&gt;]&lt;/tt&gt;</h3>
<ul>
<li>When clicked, fields will be sent and the form will quit.</li>
</ul>
<h3><a class="anchor" id="autotoc_md661"></a>
&lt;tt&gt;textlist[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;name&gt;;&lt;listelem 1&gt;,&lt;listelem 2&gt;,...,&lt;listelem n&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Scrollable item list showing arbitrary text elements</li>
<li><code>x</code> and <code>y</code> position the itemlist relative to the top left of the menu</li>
<li><code>w</code> and <code>h</code> are the size of the itemlist</li>
<li><code>name</code> fieldname sent to server on doubleclick value is current selected element</li>
<li><code>listelements</code> can be prepended by #color in hexadecimal format RRGGBB (only),<ul>
<li>if you want a listelement to start with "#" write "##".</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md662"></a>
&lt;tt&gt;textlist[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;name&gt;;&lt;listelem 1&gt;,&lt;listelem 2&gt;,...,&lt;listelem n&gt;;&lt;selected idx&gt;;&lt;transparent&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Scrollable itemlist showing arbitrary text elements</li>
<li><code>x</code> and <code>y</code> position the item list relative to the top left of the menu</li>
<li><code>w</code> and <code>h</code> are the size of the item list</li>
<li><code>name</code> fieldname sent to server on doubleclick value is current selected element</li>
<li><code>listelements</code> can be prepended by #RRGGBB (only) in hexadecimal format<ul>
<li>if you want a listelement to start with "#" write "##"</li>
</ul>
</li>
<li>Index to be selected within textlist</li>
<li><code>true</code>/<code>false</code>: draw transparent background</li>
<li>See also <code>minetest.explode_textlist_event</code> (main menu: <code>engine.explode_textlist_event</code>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md663"></a>
&lt;tt&gt;tabheader[&lt;X&gt;,&lt;Y&gt;;&lt;name&gt;;&lt;caption 1&gt;,&lt;caption 2&gt;,...,&lt;caption n&gt;;&lt;current_tab&gt;;&lt;transparent&gt;;&lt;draw_border&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Show a tab**header** at specific position (ignores formsize)</li>
<li><code>x</code> and <code>y</code> position the itemlist relative to the top left of the menu</li>
<li><code>name</code> fieldname data is transferred to Lua</li>
<li><code>caption 1</code>...: name shown on top of tab</li>
<li><code>current_tab</code>: index of selected tab 1...</li>
<li><code>transparent</code> (optional): show transparent</li>
<li><code>draw_border</code> (optional): draw border</li>
</ul>
<h3><a class="anchor" id="autotoc_md664"></a>
&lt;tt&gt;box[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;color&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Simple colored semitransparent box</li>
<li><code>x</code> and <code>y</code> position the box relative to the top left of the menu</li>
<li><code>w</code> and <code>h</code> are the size of box</li>
<li><code>color</code> is color specified as a <code>ColorString</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md665"></a>
&lt;tt&gt;dropdown[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;;&lt;name&gt;;&lt;item 1&gt;,&lt;item 2&gt;, ...,&lt;item n&gt;;&lt;selected idx&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Show a dropdown field</li>
<li><b>Important note</b>: There are two different operation modes:<ol type="1">
<li>handle directly on change (only changed dropdown is submitted)</li>
<li>read the value on pressing a button (all dropdown values are available)</li>
</ol>
</li>
<li><code>x</code> and <code>y</code> position of dropdown</li>
<li>Width of dropdown</li>
<li>Fieldname data is transferred to Lua</li>
<li>Items to be shown in dropdown</li>
<li>Index of currently selected dropdown item</li>
</ul>
<h3><a class="anchor" id="autotoc_md666"></a>
&lt;tt&gt;checkbox[&lt;X&gt;,&lt;Y&gt;;&lt;name&gt;;&lt;label&gt;;&lt;selected&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Show a checkbox</li>
<li><code>x</code> and <code>y</code>: position of checkbox</li>
<li><code>name</code> fieldname data is transferred to Lua</li>
<li><code>label</code> to be shown left of checkbox</li>
<li><code>selected</code> (optional): <code>true</code>/<code>false</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md667"></a>
&lt;tt&gt;scrollbar[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;orientation&gt;;&lt;name&gt;;&lt;value&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Show a scrollbar</li>
<li>There are two ways to use it:<ol type="1">
<li>handle the changed event (only changed scrollbar is available)</li>
<li>read the value on pressing a button (all scrollbars are available)</li>
</ol>
</li>
<li><code>x</code> and <code>y</code>: position of trackbar</li>
<li><code>w</code> and <code>h</code>: width and height</li>
<li><code>orientation</code>: <code>vertical</code>/<code>horizontal</code></li>
<li>Fieldname data is transferred to Lua</li>
<li><a class="el" href="unionValue.html">Value</a> this trackbar is set to (<code>0</code>-<code>1000</code>)</li>
<li>See also <code>minetest.explode_scrollbar_event</code> (main menu: <code>engine.explode_scrollbar_event</code>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md668"></a>
&lt;tt&gt;table[&lt;X&gt;,&lt;Y&gt;;&lt;W&gt;,&lt;H&gt;;&lt;name&gt;;&lt;cell 1&gt;,&lt;cell 2&gt;,...,&lt;cell n&gt;;&lt;selected idx&gt;]&lt;/tt&gt;</h3>
<ul>
<li>Show scrollable table using options defined by the previous <code>tableoptions[]</code></li>
<li>Displays cells as defined by the previous <code>tablecolumns[]</code></li>
<li><code>x</code> and <code>y</code>: position the itemlist relative to the top left of the menu</li>
<li><code>w</code> and <code>h</code> are the size of the itemlist</li>
<li><code>name</code>: fieldname sent to server on row select or doubleclick</li>
<li><code>cell 1</code>...<code>cell n</code>: cell contents given in row-major order</li>
<li><code>selected idx</code>: index of row to be selected within table (first row = <code>1</code>)</li>
<li>See also <code>minetest.explode_table_event</code> (main menu: <code>engine.explode_table_event</code>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md669"></a>
&lt;tt&gt;tableoptions[&lt;opt 1&gt;;&lt;opt 2&gt;;...]&lt;/tt&gt;</h3>
<ul>
<li>Sets options for <code>table[]</code></li>
<li><code>color=#RRGGBB</code><ul>
<li>default text color (<code>ColorString</code>), defaults to <code>#FFFFFF</code></li>
</ul>
</li>
<li><code>background=#RRGGBB</code><ul>
<li>table background color (<code>ColorString</code>), defaults to <code>#000000</code></li>
</ul>
</li>
<li><code>border=&lt;true/false&gt;</code><ul>
<li>should the table be drawn with a border? (default: <code>true</code>)</li>
</ul>
</li>
<li><code>highlight=#RRGGBB</code><ul>
<li>highlight background color (<code>ColorString</code>), defaults to <code>#466432</code></li>
</ul>
</li>
<li><code>highlight_text=#RRGGBB</code><ul>
<li>highlight text color (<code>ColorString</code>), defaults to <code>#FFFFFF</code></li>
</ul>
</li>
<li><code>opendepth=&lt;value&gt;</code><ul>
<li>all subtrees up to <code>depth &lt; value</code> are open (default value = <code>0</code>)</li>
<li>only useful when there is a column of type "tree"</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md670"></a>
&lt;tt&gt;tablecolumns[&lt;type 1&gt;,&lt;opt 1a&gt;,&lt;opt 1b&gt;,...;&lt;type 2&gt;,&lt;opt 2a&gt;,&lt;opt 2b&gt;;...]&lt;/tt&gt;</h3>
<ul>
<li>Sets columns for <code>table[]</code></li>
<li>Types: <code>text</code>, <code>image</code>, <code>color</code>, <code>indent</code>, <code>tree</code><ul>
<li><code>text</code>: show cell contents as text</li>
<li><code>image</code>: cell contents are an image index, use column options to define images</li>
<li><code>color</code>: cell contents are a ColorString and define color of following cell</li>
<li><code>indent</code>: cell contents are a number and define indentation of following cell</li>
<li><code>tree</code>: same as indent, but user can open and close subtrees (treeview-like)</li>
</ul>
</li>
<li>Column options:<ul>
<li><code>align=&lt;value&gt;</code><ul>
<li>for <code>text</code> and <code>image</code>: content alignment within cells. Available values: <code>left</code> (default), <code>center</code>, <code>right</code>, <code>inline</code></li>
</ul>
</li>
<li><code>width=&lt;value&gt;</code><ul>
<li>for <code>text</code> and <code>image</code>: minimum width in em (default: <code>0</code>)</li>
<li>for <code>indent</code> and <code>tree</code>: indent width in em (default: <code>1.5</code>)</li>
</ul>
</li>
<li><code>padding=&lt;value&gt;</code>: padding left of the column, in em (default <code>0.5</code>). Exception: defaults to 0 for indent columns</li>
<li><code>tooltip=&lt;value&gt;</code>: tooltip text (default: empty)</li>
<li><code>image</code> column options:<ul>
<li><code>0=&lt;value&gt;</code> sets image for image index 0</li>
<li><code>1=&lt;value&gt;</code> sets image for image index 1</li>
<li><code>2=&lt;value&gt;</code> sets image for image index 2</li>
<li>and so on; defined indices need not be contiguous empty or non-numeric cells are treated as <code>0</code>.</li>
</ul>
</li>
<li><code>color</code> column options:<ul>
<li><code>span=&lt;value&gt;</code>: number of following columns to affect (default: infinite)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><b>Note</b>: do <em>not</em> use an element name starting with <code>key_</code>; those names are reserved to pass key press events to formspec!</p>
<h1><a class="anchor" id="autotoc_md671"></a>
Spatial Vectors</h1>
<ul>
<li><code>vector.new(a[, b, c])</code>: returns a vector:<ul>
<li>A copy of <code>a</code> if <code>a</code> is a vector.</li>
<li><code>{x = a, y = b, z = c}</code>, if all <code>a, b, c</code> are defined</li>
</ul>
</li>
<li><code>vector.direction(p1, p2)</code>: returns a vector</li>
<li><code>vector.distance(p1, p2)</code>: returns a number</li>
<li><code>vector.length(v)</code>: returns a number</li>
<li><code>vector.normalize(v)</code>: returns a vector</li>
<li><code>vector.floor(v)</code>: returns a vector, each dimension rounded down</li>
<li><code>vector.round(v)</code>: returns a vector, each dimension rounded to nearest int</li>
<li><code>vector.apply(v, func)</code>: returns a vector</li>
<li><code>vector.combine(v, w, func)</code>: returns a vector</li>
<li><code>vector.equals(v1, v2)</code>: returns a boolean</li>
</ul>
<p>For the following functions <code>x</code> can be either a vector or a number:</p>
<ul>
<li><code>vector.add(v, x)</code>: returns a vector</li>
<li><code>vector.subtract(v, x)</code>: returns a vector</li>
<li><code>vector.multiply(v, x)</code>: returns a scaled vector or Schur product</li>
<li><code>vector.divide(v, x)</code>: returns a scaled vector or Schur quotient</li>
</ul>
<h1><a class="anchor" id="autotoc_md672"></a>
Helper functions</h1>
<ul>
<li><code>dump2(obj, name="_", dumped={})</code><ul>
<li>Return object serialized as a string, handles reference loops</li>
</ul>
</li>
<li><code>dump(obj, dumped={})</code><ul>
<li>Return object serialized as a string</li>
</ul>
</li>
<li><code>math.hypot(x, y)</code><ul>
<li>Get the hypotenuse of a triangle with legs x and y. Useful for distance calculation.</li>
</ul>
</li>
<li><code>math.sign(x, tolerance)</code><ul>
<li>Get the sign of a number. <a class="el" href="classOptional.html">Optional</a>: Also returns <code>0</code> when the absolute value is within the tolerance (default: <code>0</code>)</li>
</ul>
</li>
<li><code>string.split(str, separator=",", include_empty=false, max_splits=-1, sep_is_pattern=false)</code><ul>
<li>If <code>max_splits</code> is negative, do not limit splits.</li>
<li><code>sep_is_pattern</code> specifies if separator is a plain string or a pattern (regex).</li>
<li>e.g. <code>string:split("a,b", ",") == {"a","b"}</code></li>
</ul>
</li>
<li><code>string:trim()</code><ul>
<li>e.g. <code>string.trim("\n \t\tfoo bar\t ") == "foo bar"</code></li>
</ul>
</li>
<li><code>minetest.wrap_text(str, limit)</code>: returns a string<ul>
<li>Adds new lines to the string to keep it within the specified character limit</li>
<li>limit: Maximal amount of characters in one line</li>
</ul>
</li>
<li><code>minetest.pos_to_string({x=X,y=Y,z=Z}, decimal_places))</code>: returns string <code>"(X,Y,Z)"</code><ul>
<li>Convert position to a printable string <a class="el" href="classOptional.html">Optional</a>: 'decimal_places' will round the x, y and z of the pos to the given decimal place.</li>
</ul>
</li>
<li><code>minetest.string_to_pos(string)</code>: returns a position<ul>
<li>Same but in reverse. Returns <code>nil</code> if the string can't be parsed to a position.</li>
</ul>
</li>
<li><code>minetest.string_to_area("(X1, Y1, Z1) (X2, Y2, Z2)")</code>: returns two positions<ul>
<li>Converts a string representing an area box into two positions</li>
</ul>
</li>
<li><code>minetest.is_yes(arg)</code><ul>
<li>returns whether <code>arg</code> can be interpreted as yes</li>
</ul>
</li>
<li><code>minetest.is_nan(arg)</code><ul>
<li>returns true when the passed number represents NaN.</li>
</ul>
</li>
<li><code>table.copy(table)</code>: returns a table<ul>
<li>returns a deep copy of <code>table</code></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md673"></a>
Minetest namespace reference</h1>
<h2><a class="anchor" id="autotoc_md674"></a>
Utilities</h2>
<ul>
<li><code>minetest.get_current_modname()</code>: returns the currently loading mod's name, when we are loading a mod</li>
<li><code>minetest.get_modpath(modname)</code>: returns virtual path of given mod including the trailing separator. This is useful to load additional Lua files contained in your mod: e.g. <code>dofile(minetest.get_modpath(minetest.get_current_modname()) .. "stuff.lua")</code></li>
<li><code>minetest.get_language()</code>: returns two strings<ul>
<li>the current gettext locale</li>
<li>the current language code (the same as used for client-side translations)</li>
</ul>
</li>
<li><code>minetest.get_version()</code>: returns a table containing components of the engine version. Components:<ul>
<li><code>project</code>: Name of the project, eg, "Minetest"</li>
<li><code>string</code>: Simple version, eg, "1.2.3-dev"</li>
<li><code>hash</code>: Full git version (only set if available), eg, "1.2.3-dev-01234567-dirty" Use this for informational purposes only. The information in the returned table does not represent the capabilities of the engine, nor is it reliable or verifiable. Compatible forks will have a different name and version entirely. To check for the presence of engine features, test whether the functions exported by the wanted features exist. For example: <code>if minetest.check_for_falling then ... end</code>.</li>
</ul>
</li>
<li><code>minetest.sha1(data, [raw])</code>: returns the sha1 hash of data<ul>
<li><code>data</code>: string of data to hash</li>
<li><code>raw</code>: return raw bytes instead of hex digits, default: false</li>
</ul>
</li>
<li><code>minetest.colorspec_to_colorstring(colorspec)</code>: Converts a ColorSpec to a ColorString. If the ColorSpec is invalid, returns <code>nil</code>.<ul>
<li><code>colorspec</code>: The ColorSpec to convert</li>
</ul>
</li>
<li><code>minetest.get_csm_restrictions()</code>: returns a table of <code>Flags</code> indicating the restrictions applied to the current mod.<ul>
<li>If a flag in this table is set to true, the feature is RESTRICTED.</li>
<li>Possible flags: <code>load_client_mods</code>, <code>chat_messages</code>, <code>read_itemdefs</code>, <code>read_nodedefs</code>, <code>lookup_nodes</code>, <code>read_playerinfo</code></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md675"></a>
Logging</h2>
<ul>
<li><code>minetest.debug(...)</code><ul>
<li>Equivalent to <code>minetest.log(table.concat({...}, "\t"))</code></li>
</ul>
</li>
<li><code>minetest.log([level,] text)</code><ul>
<li><code>level</code> is one of <code>"none"</code>, <code>"error"</code>, <code>"warning"</code>, <code>"action"</code>, <code>"info"</code>, or <code>"verbose"</code>. Default is <code>"none"</code>.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md676"></a>
Global callback registration functions</h2>
<p>Call these functions only at load time!</p>
<ul>
<li><code>minetest.register_globalstep(function(dtime))</code><ul>
<li>Called every client environment step, usually interval of 0.1s</li>
</ul>
</li>
<li><code>minetest.register_on_mods_loaded(function())</code><ul>
<li>Called just after mods have finished loading.</li>
</ul>
</li>
<li><code>minetest.register_on_shutdown(function())</code><ul>
<li>Called before client shutdown</li>
<li><b>Warning</b>: If the client terminates abnormally (i.e. crashes), the registered callbacks <b>will likely not be run</b>. Data should be saved at semi-frequent intervals as well as on server shutdown.</li>
</ul>
</li>
<li><code>minetest.register_on_receiving_chat_message(function(message))</code><ul>
<li>Called always when a client receive a message</li>
<li>Return <code>true</code> to mark the message as handled, which means that it will not be shown to chat</li>
</ul>
</li>
<li><code>minetest.register_on_sending_chat_message(function(message))</code><ul>
<li>Called always when a client sends a message from chat</li>
<li>Return <code>true</code> to mark the message as handled, which means that it will not be sent to server</li>
</ul>
</li>
<li><code>minetest.register_chatcommand(cmd, chatcommand definition)</code><ul>
<li>Adds definition to minetest.registered_chatcommands</li>
</ul>
</li>
<li><code>minetest.unregister_chatcommand(name)</code><ul>
<li>Unregisters a chatcommands registered with register_chatcommand.</li>
</ul>
</li>
<li><code>minetest.register_on_chatcommand(function(command, params))</code><ul>
<li>Called always when a chatcommand is triggered, before <code>minetest.registered_chatcommands</code> is checked to see if the command exists, but after the input is parsed.</li>
<li>Return <code>true</code> to mark the command as handled, which means that the default handlers will be prevented.</li>
</ul>
</li>
<li><code>minetest.register_on_death(function())</code><ul>
<li>Called when the local player dies</li>
</ul>
</li>
<li><code>minetest.register_on_hp_modification(function(hp))</code><ul>
<li>Called when server modified player's HP</li>
</ul>
</li>
<li><code>minetest.register_on_damage_taken(function(hp))</code><ul>
<li>Called when the local player take damages</li>
</ul>
</li>
<li><code>minetest.register_on_formspec_input(function(formname, fields))</code><ul>
<li>Called when a button is pressed in the local player's inventory form</li>
<li>Newest functions are called first</li>
<li>If function returns <code>true</code>, remaining functions are not called</li>
</ul>
</li>
<li><code>minetest.register_on_dignode(function(pos, node))</code><ul>
<li>Called when the local player digs a node</li>
<li>Newest functions are called first</li>
<li>If any function returns true, the node isn't dug</li>
</ul>
</li>
<li><code>minetest.register_on_punchnode(function(pos, node))</code><ul>
<li>Called when the local player punches a node</li>
<li>Newest functions are called first</li>
<li>If any function returns true, the punch is ignored</li>
</ul>
</li>
<li><code>minetest.register_on_placenode(function(pointed_thing, node))</code><ul>
<li>Called when a node has been placed</li>
</ul>
</li>
<li><code>minetest.register_on_item_use(function(item, pointed_thing))</code><ul>
<li>Called when the local player uses an item.</li>
<li>Newest functions are called first.</li>
<li>If any function returns true, the item use is not sent to server.</li>
</ul>
</li>
<li><code>minetest.register_on_modchannel_message(function(channel_name, sender, message))</code><ul>
<li>Called when an incoming mod channel message is received</li>
<li>You must have joined some channels before, and server must acknowledge the join request.</li>
<li>If message comes from a server mod, <code>sender</code> field is an empty string.</li>
</ul>
</li>
<li><code>minetest.register_on_modchannel_signal(function(channel_name, signal))</code><ul>
<li>Called when a valid incoming mod channel signal is received</li>
<li>Signal id permit to react to server mod channel events</li>
<li>Possible values are: 0: join_ok 1: join_failed 2: leave_ok 3: leave_failed 4: event_on_not_joined_channel 5: state_changed</li>
</ul>
</li>
<li><code>minetest.register_on_inventory_open(function(inventory))</code><ul>
<li>Called when the local player open inventory</li>
<li>Newest functions are called first</li>
<li>If any function returns true, inventory doesn't open </li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md677"></a>
Sounds</h2>
<ul>
<li><code>minetest.sound_play(spec, parameters)</code>: returns a handle<ul>
<li><code>spec</code> is a <code><a class="el" href="structSimpleSoundSpec.html">SimpleSoundSpec</a></code></li>
<li><code>parameters</code> is a sound parameter table</li>
</ul>
</li>
<li><code>minetest.sound_stop(handle)</code><ul>
<li><code>handle</code> is a handle returned by <code>minetest.sound_play</code></li>
</ul>
</li>
<li><code>minetest.sound_fade(handle, step, gain)</code><ul>
<li><code>handle</code> is a handle returned by <code>minetest.sound_play</code></li>
<li><code>step</code> determines how fast a sound will fade. Negative step will lower the sound volume, positive step will increase the sound volume.</li>
<li><code>gain</code> the target gain for the fade.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md678"></a>
Timing</h2>
<ul>
<li><code>minetest.after(time, func, ...)</code><ul>
<li>Call the function <code>func</code> after <code>time</code> seconds, may be fractional</li>
<li><a class="el" href="classOptional.html">Optional</a>: Variable number of arguments that are passed to <code>func</code></li>
</ul>
</li>
<li><code>minetest.get_us_time()</code><ul>
<li>Returns time with microsecond precision. May not return wall time.</li>
</ul>
</li>
<li><code>minetest.get_timeofday()</code><ul>
<li>Returns the time of day: <code>0</code> for midnight, <code>0.5</code> for midday</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md679"></a>
Map</h2>
<ul>
<li><code>minetest.get_node_or_nil(pos)</code><ul>
<li>Returns the node at the given position as table in the format <code>{name="node_name", param1=0, param2=0}</code>, returns <code>nil</code> for unloaded areas or flavor limited areas.</li>
</ul>
</li>
<li><code>minetest.get_node_light(pos, timeofday)</code><ul>
<li>Gets the light value at the given position. Note that the light value "inside" the node at the given position is returned, so you usually want to get the light value of a neighbor.</li>
<li><code>pos</code>: The position where to measure the light.</li>
<li><code>timeofday</code>: <code>nil</code> for current time, <code>0</code> for night, <code>0.5</code> for day</li>
<li>Returns a number between <code>0</code> and <code>15</code> or <code>nil</code></li>
</ul>
</li>
<li><code>minetest.find_node_near(pos, radius, nodenames, [search_center])</code>: returns pos or <code>nil</code><ul>
<li><code>radius</code>: using a maximum metric</li>
<li><code>nodenames</code>: e.g. <code>{"ignore", "group:tree"}</code> or <code>"default:dirt"</code></li>
<li><code>search_center</code> is an optional boolean (default: <code>false</code>) If true <code>pos</code> is also checked for the nodes</li>
</ul>
</li>
<li><code>minetest.find_nodes_in_area(pos1, pos2, nodenames, [grouped])</code><ul>
<li><code>pos1</code> and <code>pos2</code> are the min and max positions of the area to search.</li>
<li><code>nodenames</code>: e.g. <code>{"ignore", "group:tree"}</code> or <code>"default:dirt"</code></li>
<li>If <code>grouped</code> is true the return value is a table indexed by node name which contains lists of positions.</li>
<li>If <code>grouped</code> is false or absent the return values are as follows: first value: <a class="el" href="structTable.html">Table</a> with all node positions second value: <a class="el" href="structTable.html">Table</a> with the count of each node with the node name as index</li>
<li><a class="el" href="structArea.html">Area</a> volume is limited to 4,096,000 nodes</li>
</ul>
</li>
<li><code>minetest.find_nodes_in_area_under_air(pos1, pos2, nodenames)</code>: returns a list of positions.<ul>
<li><code>nodenames</code>: e.g. <code>{"ignore", "group:tree"}</code> or <code>"default:dirt"</code></li>
<li>Return value: <a class="el" href="structTable.html">Table</a> with all node positions with a node air above</li>
<li><a class="el" href="structArea.html">Area</a> volume is limited to 4,096,000 nodes</li>
</ul>
</li>
<li><code>minetest.line_of_sight(pos1, pos2)</code>: returns <code>boolean, pos</code><ul>
<li>Checks if there is anything other than air between pos1 and pos2.</li>
<li>Returns false if something is blocking the sight.</li>
<li>Returns the position of the blocking node when <code>false</code></li>
<li><code>pos1</code>: First position</li>
<li><code>pos2</code>: Second position</li>
</ul>
</li>
<li><code>minetest.raycast(pos1, pos2, objects, liquids)</code>: returns <code>Raycast</code><ul>
<li>Creates a <code>Raycast</code> object.</li>
<li><code>pos1</code>: start of the ray</li>
<li><code>pos2</code>: end of the ray</li>
<li><code>objects</code>: if false, only nodes will be returned. Default is <code>true</code>.</li>
<li><code>liquids</code>: if false, liquid nodes won't be returned. Default is <code>false</code>.</li>
</ul>
</li>
<li><code>minetest.find_nodes_with_meta(pos1, pos2)</code><ul>
<li>Get a table of positions of nodes that have metadata within a region {pos1, pos2}.</li>
</ul>
</li>
<li><code>minetest.get_meta(pos)</code><ul>
<li>Get a <code><a class="el" href="classNodeMetaRef.html">NodeMetaRef</a></code> at that position</li>
</ul>
</li>
<li><code>minetest.get_node_level(pos)</code><ul>
<li>get level of leveled node (water, snow)</li>
</ul>
</li>
<li><code>minetest.get_node_max_level(pos)</code><ul>
<li>get max available level for leveled node</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md680"></a>
Player</h2>
<ul>
<li><code>minetest.send_chat_message(message)</code><ul>
<li>Act as if <code>message</code> was typed by the player into the terminal.</li>
</ul>
</li>
<li><code>minetest.run_server_chatcommand(cmd, param)</code><ul>
<li>Alias for <code>minetest.send_chat_message("/" .. cmd .. " " .. param)</code></li>
</ul>
</li>
<li><code>minetest.clear_out_chat_queue()</code><ul>
<li>Clears the out chat queue</li>
</ul>
</li>
<li><code>minetest.localplayer</code><ul>
<li>Reference to the <a class="el" href="classLocalPlayer.html">LocalPlayer</a> object. See <a href="#localplayer"><code>LocalPlayer</code></a> class reference for methods.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md681"></a>
Privileges</h2>
<ul>
<li><code>minetest.get_privilege_list()</code><ul>
<li>Returns a list of privileges the current player has in the format <code>{priv1=true,...}</code></li>
</ul>
</li>
<li><code>minetest.string_to_privs(str)</code>: returns <code>{priv1=true,...}</code></li>
<li><code>minetest.privs_to_string(privs)</code>: returns <code>"priv1,priv2,..."</code><ul>
<li>Convert between two privilege representations</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md682"></a>
Client Environment</h2>
<ul>
<li><code>minetest.get_player_names()</code><ul>
<li>Returns list of player names on server (nil if CSM_RF_READ_PLAYERINFO is enabled by server)</li>
</ul>
</li>
<li><code>minetest.disconnect()</code><ul>
<li>Disconnect from the server and exit to main menu.</li>
<li>Returns <code>false</code> if the client is already disconnecting otherwise returns <code>true</code>.</li>
</ul>
</li>
<li><code>minetest.get_server_info()</code><ul>
<li>Returns <a href="#server-info">server info</a>.</li>
</ul>
</li>
<li><code>minetest.send_respawn()</code><ul>
<li>Sends a respawn request to the server.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md683"></a>
Storage API</h2>
<ul>
<li><code>minetest.get_mod_storage()</code>:<ul>
<li>returns reference to mod private <code><a class="el" href="classStorageRef.html">StorageRef</a></code></li>
<li>must be called during mod load time</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md684"></a>
Mod channels</h2>
<p><img src="docs/mod channels.png" alt="Mod channels communication scheme" class="inline"/></p>
<ul>
<li><code>minetest.mod_channel_join(channel_name)</code><ul>
<li><a class="el" href="classClient.html">Client</a> joins channel <code>channel_name</code>, and creates it, if necessary. You should listen from incoming messages with <code>minetest.register_on_modchannel_message</code> call to receive incoming messages. Warning, this function is asynchronous.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md685"></a>
Particles</h2>
<ul>
<li><code>minetest.add_particle(particle definition)</code></li>
<li><code>minetest.add_particlespawner(particlespawner definition)</code><ul>
<li>Add a <code><a class="el" href="classParticleSpawner.html">ParticleSpawner</a></code>, an object that spawns an amount of particles over <code>time</code> seconds</li>
<li>Returns an <code>id</code>, and -1 if adding didn't succeed</li>
</ul>
</li>
<li><code>minetest.delete_particlespawner(id)</code><ul>
<li>Delete <code><a class="el" href="classParticleSpawner.html">ParticleSpawner</a></code> with <code>id</code> (return value from <code>minetest.add_particlespawner</code>)</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md686"></a>
Misc.</h2>
<ul>
<li><code>minetest.parse_json(string[, nullvalue])</code>: returns something<ul>
<li>Convert a string containing JSON data into the Lua equivalent</li>
<li><code>nullvalue</code>: returned in place of the JSON null; defaults to <code>nil</code></li>
<li>On success returns a table, a string, a number, a boolean or <code>nullvalue</code></li>
<li>On failure outputs an error message and returns <code>nil</code></li>
<li>Example: <code>parse_json("[10, {\"a":false}]")</code>, returns <code>{10, {a = false}}</code></li>
</ul>
</li>
<li><code>minetest.write_json(data[, styled])</code>: returns a string or <code>nil</code> and an error message<ul>
<li>Convert a Lua table into a JSON string</li>
<li>styled: Outputs in a human-readable format if this is set, defaults to false</li>
<li>Unserializable things like functions and userdata are saved as null.</li>
<li><b>Warning</b>: JSON is more strict than the Lua table format.<ol type="1">
<li>You can only use strings and positive integers of at least one as keys.</li>
<li>You cannot mix string and integer keys. This is due to the fact that JSON has two distinct array and object values.</li>
</ol>
</li>
<li>Example: <code>write_json({10, {a = false}})</code>, returns <code>"[10, {\"a": false}]"</code></li>
</ul>
</li>
<li><code>minetest.serialize(table)</code>: returns a string<ul>
<li>Convert a table containing tables, strings, numbers, booleans and <code>nil</code>s into string form readable by <code>minetest.deserialize</code></li>
<li>Example: &lsquo;serialize({foo='bar&rsquo;})<code>, returns</code>'return { ["foo"] = "bar" }'<code> *</code>minetest.deserialize(string)<code>: returns a table</code></li>
<li><code>Convert a string returned by</code>minetest.deserialize&lt;tt&gt;into a table *string` is loaded in an empty sandbox environment.</li>
<li>Will load functions, but they cannot access the global environment.</li>
<li>Example: &lsquo;deserialize('return { ["foo"] = "bar" }&rsquo;)<code>, returns</code>{foo='bar'}<code></code></li>
<li><code>Example:</code>deserialize('print("foo")')<code>, returns</code>nil&lt;tt&gt;(function call fails) *error:[string "print("foo")"]:1: attempt to call global 'print' (a nil value)<code> *</code>minetest.compress(data, method, ...)<code>: returns</code>compressed_data`</li>
<li>Compress a string of data.</li>
<li><code>method</code> is a string identifying the compression method to be used.</li>
<li>Supported compression methods:<ul>
<li>Deflate (zlib): <code>"deflate"</code></li>
<li>Zstandard: <code>"zstd"</code></li>
</ul>
</li>
<li><code>...</code> indicates method-specific arguments. Currently defined arguments are:<ul>
<li>Deflate: <code>level</code> - Compression level, <code>0</code>-<code>9</code> or <code>nil</code>.</li>
<li>Zstandard: <code>level</code> - Compression level. Integer or <code>nil</code>. Default <code>3</code>. Note any supported Zstandard compression level could be used here, but these are subject to change between Zstandard versions.</li>
</ul>
</li>
</ul>
</li>
<li><code>minetest.decompress(compressed_data, method, ...)</code>: returns data<ul>
<li>Decompress a string of data using the algorithm specified by <code>method</code>.</li>
<li>See documentation on <code>minetest.compress()</code> for supported compression methods.</li>
<li><code>...</code> indicates method-specific arguments. Currently, no methods use this</li>
</ul>
</li>
<li><code>minetest.rgba(red, green, blue[, alpha])</code>: returns a string<ul>
<li>Each argument is an 8 Bit unsigned integer</li>
<li>Returns the ColorString from rgb or rgba values</li>
<li>Example: <code>minetest.rgba(10, 20, 30, 40)</code>, returns <code>"#0A141E28"</code></li>
</ul>
</li>
<li><code>minetest.encode_base64(string)</code>: returns string encoded in base64<ul>
<li>Encodes a string in base64.</li>
</ul>
</li>
<li><code>minetest.decode_base64(string)</code>: returns string or nil on failure<ul>
<li>Padding characters are only supported starting at version 5.4.0, where 5.5.0 and newer perform proper checks.</li>
<li>Decodes a string encoded in base64.</li>
</ul>
</li>
<li><code>minetest.gettext(string)</code> : returns string<ul>
<li>look up the translation of a string in the gettext message catalog</li>
</ul>
</li>
<li><code>fgettext_ne(string, ...)</code><ul>
<li>call minetest.gettext(string), replace "$1"..."$9" with the given extra arguments and return the result</li>
</ul>
</li>
<li><code>fgettext(string, ...)</code> : returns string<ul>
<li>same as fgettext_ne(), but calls minetest.formspec_escape before returning result</li>
</ul>
</li>
<li><code>minetest.pointed_thing_to_face_pos(placer, pointed_thing)</code>: returns a position<ul>
<li>returns the exact position on the surface of a pointed node</li>
</ul>
</li>
<li><code>minetest.global_exists(name)</code><ul>
<li>Checks if a global variable has been set, without triggering a warning.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md687"></a>
UI</h2>
<ul>
<li><code>minetest.ui.minimap</code><ul>
<li>Reference to the minimap object. See <a href="#minimap"><code>Minimap</code></a> class reference for methods.</li>
<li>If client disabled minimap (using enable_minimap setting) this reference will be nil.</li>
</ul>
</li>
<li><code>minetest.camera</code><ul>
<li>Reference to the camera object. See <a href="#camera"><code>Camera</code></a> class reference for methods.</li>
</ul>
</li>
<li><code>minetest.show_formspec(formname, formspec)</code> : returns true on success<ul>
<li>Shows a formspec to the player</li>
</ul>
</li>
<li><code>minetest.display_chat_message(message)</code> returns true on success<ul>
<li>Shows a chat message to the current player.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md688"></a>
Setting-related</h1>
<ul>
<li><code>minetest.settings</code>: <a class="el" href="classSettings.html">Settings</a> object containing all of the settings from the main config file (<code>minetest.conf</code>). Check lua_api.md for class reference.</li>
<li><code>minetest.setting_get_pos(name)</code>: Loads a setting from the main settings and parses it as a position (in the format <code>(1,2,3)</code>). Returns a position or nil.</li>
</ul>
<h1><a class="anchor" id="autotoc_md689"></a>
Class reference</h1>
<h2><a class="anchor" id="autotoc_md690"></a>
ModChannel</h2>
<p>An interface to use mod channels on client and server</p>
<h3><a class="anchor" id="autotoc_md691"></a>
Methods</h3>
<ul>
<li><code>leave()</code>: leave the mod channel.<ul>
<li><a class="el" href="classClient.html">Client</a> leaves channel <code>channel_name</code>.</li>
<li>No more incoming or outgoing messages can be sent to this channel from client mods.</li>
<li>This invalidate all future object usage</li>
<li>Ensure your set mod_channel to nil after that to free Lua resources</li>
</ul>
</li>
<li><code>is_writeable()</code>: returns true if channel is writable and mod can send over it.</li>
<li><code>send_all(message)</code>: Send <code>message</code> though the mod channel.<ul>
<li>If mod channel is not writable or invalid, message will be dropped.</li>
<li>Message size is limited to 65535 characters by protocol.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md692"></a>
Minimap</h2>
<p>An interface to manipulate minimap on client UI</p>
<h3><a class="anchor" id="autotoc_md693"></a>
Methods</h3>
<ul>
<li><code>show()</code>: shows the minimap (if not disabled by server)</li>
<li><code>hide()</code>: hides the minimap</li>
<li><code>set_pos(pos)</code>: sets the minimap position on screen</li>
<li><code>get_pos()</code>: returns the minimap current position</li>
<li><code>set_angle(deg)</code>: sets the minimap angle in degrees</li>
<li><code>get_angle()</code>: returns the current minimap angle in degrees</li>
<li><code>set_mode(mode)</code>: sets the minimap mode (0 to 6)</li>
<li><code>get_mode()</code>: returns the current minimap mode</li>
<li><code>set_shape(shape)</code>: Sets the minimap shape. (0 = square, 1 = round)</li>
<li><code>get_shape()</code>: Gets the minimap shape. (0 = square, 1 = round)</li>
</ul>
<h2><a class="anchor" id="autotoc_md694"></a>
Camera</h2>
<p>An interface to get or set information about the camera and camera-node. Please do not try to access the reference until the camera is initialized, otherwise the reference will be nil.</p>
<h3><a class="anchor" id="autotoc_md695"></a>
Methods</h3>
<ul>
<li><code>set_camera_mode(mode)</code><ul>
<li>Pass <code>0</code> for first-person, <code>1</code> for third person, and <code>2</code> for third person front</li>
</ul>
</li>
<li><code>get_camera_mode()</code><ul>
<li>Returns 0, 1, or 2 as described above</li>
</ul>
</li>
<li><code>get_fov()</code><ul>
<li><p class="startli">Returns a table with X, Y, maximum and actual FOV in degrees:</p>
<p class="startli">```lua { x = number, y = number, max = number, actual = number } ```</p>
</li>
</ul>
</li>
<li><code>get_pos()</code><ul>
<li>Returns position of camera with view bobbing</li>
</ul>
</li>
<li><code>get_offset()</code><ul>
<li>Returns eye offset vector</li>
</ul>
</li>
<li><code>get_look_dir()</code><ul>
<li>Returns eye direction unit vector</li>
</ul>
</li>
<li><code>get_look_vertical()</code><ul>
<li>Returns pitch in radians</li>
</ul>
</li>
<li><code>get_look_horizontal()</code><ul>
<li>Returns yaw in radians</li>
</ul>
</li>
<li><code>get_aspect_ratio()</code><ul>
<li>Returns aspect ratio of screen</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md696"></a>
LocalPlayer</h2>
<p>An interface to retrieve information about the player. This object will only be available after the client is initialized. Earlier accesses will yield a <code>nil</code> value.</p>
<p>Methods:</p>
<ul>
<li><code>get_pos()</code><ul>
<li>returns current player current position</li>
</ul>
</li>
<li><code>get_velocity()</code><ul>
<li>returns player speed vector</li>
</ul>
</li>
<li><code>get_hp()</code><ul>
<li>returns player HP</li>
</ul>
</li>
<li><code>get_name()</code><ul>
<li>returns player name</li>
</ul>
</li>
<li><code>get_wield_index()</code><ul>
<li>returns the index of the wielded item</li>
</ul>
</li>
<li><code>get_wielded_item()</code><ul>
<li>returns the itemstack the player is holding</li>
</ul>
</li>
<li><code>is_attached()</code><ul>
<li>returns true if player is attached</li>
</ul>
</li>
<li><code>is_touching_ground()</code><ul>
<li>returns true if player touching ground</li>
</ul>
</li>
<li><code>is_in_liquid()</code><ul>
<li>returns true if player is in a liquid (This oscillates so that the player jumps a bit above the surface)</li>
</ul>
</li>
<li><code>is_in_liquid_stable()</code><ul>
<li>returns true if player is in a stable liquid (This is more stable and defines the maximum speed of the player)</li>
</ul>
</li>
<li><code>get_move_resistance()</code><ul>
<li>returns move resistance of current node, the higher the slower the player moves</li>
</ul>
</li>
<li><code>is_climbing()</code><ul>
<li>returns true if player is climbing</li>
</ul>
</li>
<li><code>swimming_vertical()</code><ul>
<li>returns true if player is swimming in vertical</li>
</ul>
</li>
<li><code>get_physics_override()</code><ul>
<li><p class="startli">returns:</p>
<p class="startli">```lua { speed = float, jump = float, gravity = float, sneak = boolean, sneak_glitch = boolean, new_move = boolean, } ```</p>
</li>
</ul>
</li>
<li><code>get_override_pos()</code><ul>
<li>returns override position</li>
</ul>
</li>
<li><code>get_last_pos()</code><ul>
<li>returns last player position before the current client step</li>
</ul>
</li>
<li><code>get_last_velocity()</code><ul>
<li>returns last player speed</li>
</ul>
</li>
<li><code>get_breath()</code><ul>
<li>returns the player's breath</li>
</ul>
</li>
<li><code>get_movement_acceleration()</code><ul>
<li><p class="startli">returns acceleration of the player in different environments:</p>
<p class="startli">```lua { fast = float, air = float, default = float, } ```</p>
</li>
</ul>
</li>
<li><code>get_movement_speed()</code><ul>
<li><p class="startli">returns player's speed in different environments:</p>
<p class="startli">```lua { walk = float, jump = float, crouch = float, fast = float, climb = float, } ```</p>
</li>
</ul>
</li>
<li><code>get_movement()</code><ul>
<li><p class="startli">returns player's movement in different environments:</p>
<p class="startli">```lua { liquid_fluidity = float, liquid_sink = float, liquid_fluidity_smooth = float, gravity = float, } ```</p>
</li>
</ul>
</li>
<li><code>get_last_look_horizontal()</code>:<ul>
<li>returns last look horizontal angle</li>
</ul>
</li>
<li><code>get_last_look_vertical()</code>:<ul>
<li>returns last look vertical angle</li>
</ul>
</li>
<li><code>get_control()</code>:<ul>
<li><p class="startli">returns pressed player controls</p>
<p class="startli">```lua { up = boolean, down = boolean, left = boolean, right = boolean, jump = boolean, aux1 = boolean, sneak = boolean, zoom = boolean, dig = boolean, place = boolean, } ```</p>
</li>
</ul>
</li>
<li><code>get_armor_groups()</code><ul>
<li>returns a table with the armor group ratings</li>
</ul>
</li>
<li><code>hud_add(definition)</code><ul>
<li>add a HUD element described by HUD def, returns ID number on success and <code>nil</code> on failure.</li>
<li>See <a href="#hud-definition-hud_add-hud_get"><code>HUD definition</code></a></li>
</ul>
</li>
<li><code>hud_get(id)</code><ul>
<li>returns the <a href="#hud-definition-hud_add-hud_get"><code>definition</code></a> of the HUD with that ID number or <code>nil</code>, if non-existent.</li>
</ul>
</li>
<li><code>hud_remove(id)</code><ul>
<li>remove the HUD element of the specified id, returns <code>true</code> on success</li>
</ul>
</li>
<li><code>hud_change(id, stat, value)</code><ul>
<li>change a value of a previously added HUD element</li>
<li>element <code>stat</code> values: <code>position</code>, <code>name</code>, <code>scale</code>, <code>text</code>, <code>number</code>, <code>item</code>, <code>dir</code></li>
<li>Returns <code>true</code> on success, otherwise returns <code>nil</code></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md697"></a>
Settings</h2>
<p>An interface to read config files in the format of <code>minetest.conf</code>.</p>
<p>It can be created via <code><a class="el" href="classSettings.html">Settings(filename)</a></code>.</p>
<h3><a class="anchor" id="autotoc_md698"></a>
Methods</h3>
<ul>
<li><code>get(key)</code>: returns a value</li>
<li><code>get_bool(key)</code>: returns a boolean</li>
<li><code>set(key, value)</code></li>
<li><code>remove(key)</code>: returns a boolean (<code>true</code> for success)</li>
<li><code>get_names()</code>: returns <code>{key1,...}</code></li>
<li><code>write()</code>: returns a boolean (<code>true</code> for success)<ul>
<li>write changes to file</li>
</ul>
</li>
<li><code>to_table()</code>: returns <code>{[key1]=value1,...}</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md699"></a>
NodeMetaRef</h2>
<p><a class="el" href="structNode.html">Node</a> metadata: reference extra data and functionality stored in a node. Can be obtained via <code>minetest.get_meta(pos)</code>.</p>
<h3><a class="anchor" id="autotoc_md700"></a>
Methods</h3>
<ul>
<li><code>get_string(name)</code></li>
<li><code>get_int(name)</code></li>
<li><code>get_float(name)</code></li>
<li><code>to_table()</code>: returns <code>nil</code> or a table with keys:<ul>
<li><code>fields</code>: key-value storage</li>
<li><code>inventory</code>: <code>{list1 = {}, ...}}</code></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md701"></a>
&lt;tt&gt;Raycast&lt;/tt&gt;</h2>
<p>A raycast on the map. It works with selection boxes. Can be used as an iterator in a for loop as:</p>
<div class="fragment"><div class="line">local ray = Raycast(...)</div>
<div class="line">for pointed_thing in ray do</div>
<div class="line">    ...</div>
<div class="line">end</div>
</div><!-- fragment --><p>The map is loaded as the ray advances. If the map is modified after the <code>Raycast</code> is created, the changes may or may not have an effect on the object.</p>
<p>It can be created via <code>Raycast(pos1, pos2, objects, liquids)</code> or <code>minetest.raycast(pos1, pos2, objects, liquids)</code> where:</p>
<ul>
<li><code>pos1</code>: start of the ray</li>
<li><code>pos2</code>: end of the ray</li>
<li><code>objects</code>: if false, only nodes will be returned. Default is true.</li>
<li><code>liquids</code>: if false, liquid nodes won't be returned. Default is false.</li>
</ul>
<h3><a class="anchor" id="autotoc_md702"></a>
Methods</h3>
<ul>
<li><code>next()</code>: returns a <code>pointed_thing</code> with exact pointing location<ul>
<li>Returns the next thing pointed by the ray or nil.</li>
</ul>
</li>
</ul>
<hr  />
 <h2><a class="anchor" id="autotoc_md704"></a>
Definitions</h2>
<ul>
<li><code>minetest.get_node_def(nodename)</code><ul>
<li>Returns <a href="#node-definition">node definition</a> table of <code>nodename</code></li>
</ul>
</li>
<li><code>minetest.get_item_def(itemstring)</code><ul>
<li>Returns item definition table of <code>itemstring</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md705"></a>
Node Definition</h3>
<div class="fragment"><div class="line">{</div>
<div class="line">    has_on_construct = bool,        -- Whether the node has the on_construct callback defined</div>
<div class="line">    has_on_destruct = bool,         -- Whether the node has the on_destruct callback defined</div>
<div class="line">    has_after_destruct = bool,      -- Whether the node has the after_destruct callback defined</div>
<div class="line">    name = string,                  -- The name of the node e.g. &quot;air&quot;, &quot;default:dirt&quot;</div>
<div class="line">    groups = table,                 -- The groups of the node</div>
<div class="line">    paramtype = string,             -- Paramtype of the node</div>
<div class="line">    paramtype2 = string,            -- ParamType2 of the node</div>
<div class="line">    drawtype = string,              -- Drawtype of the node</div>
<div class="line">    mesh = &lt;string&gt;,                -- Mesh name if existent</div>
<div class="line">    minimap_color = &lt;Color&gt;,        -- Color of node on minimap *May not exist*</div>
<div class="line">    visual_scale = number,          -- Visual scale of node</div>
<div class="line">    alpha = number,                 -- Alpha of the node. Only used for liquids</div>
<div class="line">    color = &lt;Color&gt;,                -- Color of node *May not exist*</div>
<div class="line">    palette_name = &lt;string&gt;,        -- Filename of palette *May not exist*</div>
<div class="line">    palette = &lt;{                    -- List of colors</div>
<div class="line">        Color,</div>
<div class="line">        Color</div>
<div class="line">    }&gt;,</div>
<div class="line">    waving = number,                -- 0 of not waving, 1 if waving</div>
<div class="line">    connect_sides = number,         -- Used for connected nodes</div>
<div class="line">    connects_to = {                 -- List of nodes to connect to</div>
<div class="line">        &quot;node1&quot;,</div>
<div class="line">        &quot;node2&quot;</div>
<div class="line">    },</div>
<div class="line">    post_effect_color = Color,      -- Color overlayed on the screen when the player is in the node</div>
<div class="line">    leveled = number,               -- Max level for node</div>
<div class="line">    sunlight_propogates = bool,     -- Whether light passes through the block</div>
<div class="line">    light_source = number,          -- Light emitted by the block</div>
<div class="line">    is_ground_content = bool,       -- Whether caves should cut through the node</div>
<div class="line">    walkable = bool,                -- Whether the player collides with the node</div>
<div class="line">    pointable = bool,               -- Whether the player can select the node</div>
<div class="line">    diggable = bool,                -- Whether the player can dig the node</div>
<div class="line">    climbable = bool,               -- Whether the player can climb up the node</div>
<div class="line">    buildable_to = bool,            -- Whether the player can replace the node by placing a node on it</div>
<div class="line">    rightclickable = bool,          -- Whether the player can place nodes pointing at this node</div>
<div class="line">    damage_per_second = number,     -- HP of damage per second when the player is in the node</div>
<div class="line">    liquid_type = &lt;string&gt;,         -- A string containing &quot;none&quot;, &quot;flowing&quot;, or &quot;source&quot; *May not exist*</div>
<div class="line">    liquid_alternative_flowing = &lt;string&gt;, -- Alternative node for liquid *May not exist*</div>
<div class="line">    liquid_alternative_source = &lt;string&gt;, -- Alternative node for liquid *May not exist*</div>
<div class="line">    liquid_viscosity = &lt;number&gt;,    -- How slow the liquid flows *May not exist*</div>
<div class="line">    liquid_renewable = &lt;boolean&gt;,   -- Whether the liquid makes an infinite source *May not exist*</div>
<div class="line">    liquid_range = &lt;number&gt;,        -- How far the liquid flows *May not exist*</div>
<div class="line">    drowning = bool,                -- Whether the player will drown in the node</div>
<div class="line">    floodable = bool,               -- Whether nodes will be replaced by liquids (flooded)</div>
<div class="line">    node_box = table,               -- Nodebox to draw the node with</div>
<div class="line">    collision_box = table,          -- Nodebox to set the collision area</div>
<div class="line">    selection_box = table,          -- Nodebox to set the area selected by the player</div>
<div class="line">    sounds = {                      -- Table of sounds that the block makes</div>
<div class="line">        sound_footstep = SimpleSoundSpec,</div>
<div class="line">        sound_dig = SimpleSoundSpec,</div>
<div class="line">        sound_dug = SimpleSoundSpec</div>
<div class="line">    },</div>
<div class="line">    legacy_facedir_simple = bool,   -- Whether to use old facedir</div>
<div class="line">    legacy_wallmounted = bool       -- Whether to use old wallmounted</div>
<div class="line">    move_resistance = &lt;number&gt;,     -- How slow players can move through the node *May not exist*</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md706"></a>
Item Definition</h3>
<div class="fragment"><div class="line">{</div>
<div class="line">    name = string,                  -- Name of the item e.g. &quot;default:stone&quot;</div>
<div class="line">    description = string,           -- Description of the item e.g. &quot;Stone&quot;</div>
<div class="line">    type = string,                  -- Item type: &quot;none&quot;, &quot;node&quot;, &quot;craftitem&quot;, &quot;tool&quot;</div>
<div class="line">    inventory_image = string,       -- Image in the inventory</div>
<div class="line">    wield_image = string,           -- Image in wieldmesh</div>
<div class="line">    palette_image = string,         -- Image for palette</div>
<div class="line">    color = Color,                  -- Color for item</div>
<div class="line">    wield_scale = Vector,           -- Wieldmesh scale</div>
<div class="line">    stack_max = number,             -- Number of items stackable together</div>
<div class="line">    usable = bool,                  -- Has on_use callback defined</div>
<div class="line">    liquids_pointable = bool,       -- Whether you can point at liquids with the item</div>
<div class="line">    tool_capabilities = &lt;table&gt;,    -- If the item is a tool, tool capabilities of the item</div>
<div class="line">    groups = table,                 -- Groups of the item</div>
<div class="line">    sound_place = SimpleSoundSpec,  -- Sound played when placed</div>
<div class="line">    sound_place_failed = SimpleSoundSpec, -- Sound played when placement failed</div>
<div class="line">    node_placement_prediction = string -- Node placed in client until server catches up</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md708"></a>
Chat command definition (&lt;tt&gt;register_chatcommand&lt;/tt&gt;)</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">    params = &quot;&lt;name&gt; &lt;privilege&gt;&quot;, -- Short parameter description</div>
<div class="line">    description = &quot;Remove privilege from player&quot;, -- Full description</div>
<div class="line">    func = function(param),        -- Called when command is run.</div>
<div class="line">                                   -- Returns boolean success and text output.</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md709"></a>
Server info</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">    address = &quot;minetest.example.org&quot;, -- The domain name/IP address of a remote server or &quot;&quot; for a local server.</div>
<div class="line">    ip = &quot;203.0.113.156&quot;,             -- The IP address of the server.</div>
<div class="line">    port = 30000,                     -- The port the client is connected to.</div>
<div class="line">    protocol_version = 30             -- Will not be accurate at start up as the client might not be connected to the server yet, in that case it will be 0.</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md710"></a>
HUD Definition (&lt;tt&gt;hud_add&lt;/tt&gt;, &lt;tt&gt;hud_get&lt;/tt&gt;)</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">    hud_elem_type = &quot;image&quot;, -- see HUD element types, default &quot;text&quot;</div>
<div class="line">--  ^ type of HUD element, can be either of &quot;image&quot;, &quot;text&quot;, &quot;statbar&quot;, or &quot;inventory&quot;</div>
<div class="line">    position = {x=0.5, y=0.5},</div>
<div class="line">--  ^ Left corner position of element, default `{x=0,y=0}`.</div>
<div class="line">    name = &quot;&lt;name&gt;&quot;,    -- default &quot;&quot;</div>
<div class="line">    scale = {x=2, y=2}, -- default {x=0,y=0}</div>
<div class="line">    text = &quot;&lt;text&gt;&quot;,    -- default &quot;&quot;</div>
<div class="line">    number = 2,         -- default 0</div>
<div class="line">    item = 3,           -- default 0</div>
<div class="line">--  ^ Selected item in inventory.  0 for no item selected.</div>
<div class="line">    direction = 0,      -- default 0</div>
<div class="line">--  ^ Direction: 0: left-right, 1: right-left, 2: top-bottom, 3: bottom-top</div>
<div class="line">    alignment = {x=0, y=0},   -- default {x=0, y=0}</div>
<div class="line">--  ^ See &quot;HUD Element Types&quot;</div>
<div class="line">    offset = {x=0, y=0},      -- default {x=0, y=0}</div>
<div class="line">--  ^ See &quot;HUD Element Types&quot;</div>
<div class="line">    size = { x=100, y=100 },  -- default {x=0, y=0}</div>
<div class="line">--  ^ Size of element in pixels</div>
<div class="line">    style = 0,</div>
<div class="line">--  ^ For &quot;text&quot; elements sets font style: bitfield with 1 = bold, 2 = italic, 4 = monospace</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md711"></a>
Escape sequences</h1>
<p>Most text can contain escape sequences that can for example color the text. There are a few exceptions: tab headers, dropdowns and vertical labels can't. The following functions provide escape sequences:</p><ul>
<li><code>minetest.get_color_escape_sequence(color)</code>:<ul>
<li><code>color</code> is a <a href="#colorstring">ColorString</a></li>
<li>The escape sequence sets the text color to <code>color</code></li>
</ul>
</li>
<li><code>minetest.colorize(color, message)</code>:<ul>
<li>Equivalent to: `minetest.get_color_escape_sequence(color) .. message .. minetest.get_color_escape_sequence("#ffffff")<code> *</code>minetest.get_background_escape_sequence(color)<code> *</code>color` is a <a href="#colorstring">ColorString</a></li>
<li>The escape sequence sets the background of the whole text element to <code>color</code>. Only defined for item descriptions and tooltips.</li>
</ul>
</li>
<li><code>minetest.strip_foreground_colors(str)</code><ul>
<li>Removes foreground colors added by <code>get_color_escape_sequence</code>.</li>
</ul>
</li>
<li><code>minetest.strip_background_colors(str)</code><ul>
<li>Removes background colors added by <code>get_background_escape_sequence</code>.</li>
</ul>
</li>
<li><code>minetest.strip_colors(str)</code><ul>
<li>Removes all color escape sequences.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md712"></a>
&lt;tt&gt;ColorString&lt;/tt&gt;</h1>
<p><code>#RGB</code> defines a color in hexadecimal format.</p>
<p><code>#RGBA</code> defines a color in hexadecimal format and alpha channel.</p>
<p><code>#RRGGBB</code> defines a color in hexadecimal format.</p>
<p><code>#RRGGBBAA</code> defines a color in hexadecimal format and alpha channel.</p>
<p>Named colors are also supported and are equivalent to <a href="http://dev.w3.org/csswg/css-color/#named-colors">CSS Color Module Level 4</a>. To specify the value of the alpha channel, append <code>#A</code> or <code>#AA</code> to the end of the color name (e.g. <code>colorname#08</code>).</p>
<h1><a class="anchor" id="autotoc_md713"></a>
&lt;tt&gt;Color&lt;/tt&gt;</h1>
<p><code>{a = alpha, r = red, g = green, b = blue}</code> defines an ARGB8 color.</p>
<h1><a class="anchor" id="autotoc_md714"></a>
HUD element types</h1>
<p>The position field is used for all element types.</p>
<p>To account for differing resolutions, the position coordinates are the percentage of the screen, ranging in value from <code>0</code> to <code>1</code>.</p>
<p>The name field is not yet used, but should contain a description of what the HUD element represents. The direction field is the direction in which something is drawn.</p>
<p><code>0</code> draws from left to right, <code>1</code> draws from right to left, <code>2</code> draws from top to bottom, and <code>3</code> draws from bottom to top.</p>
<p>The <code>alignment</code> field specifies how the item will be aligned. It ranges from <code>-1</code> to <code>1</code>, with <code>0</code> being the center, <code>-1</code> is moved to the left/up, and <code>1</code> is to the right/down. Fractional values can be used.</p>
<p>The <code>offset</code> field specifies a pixel offset from the position. Contrary to position, the offset is not scaled to screen size. This allows for some precisely-positioned items in the HUD.</p>
<p><b>Note</b>: <code>offset</code> <em>will</em> adapt to screen DPI as well as user defined scaling factor!</p>
<p>Below are the specific uses for fields in each type; fields not listed for that type are ignored.</p>
<p><b>Note</b>: Future revisions to the HUD API may be incompatible; the HUD API is still in the experimental stages.</p>
<h2><a class="anchor" id="autotoc_md715"></a>
&lt;tt&gt;image&lt;/tt&gt;</h2>
<p>Displays an image on the HUD.</p>
<ul>
<li><code>scale</code>: The scale of the image, with 1 being the original texture size. Only the X coordinate scale is used (positive values). Negative values represent that percentage of the screen it should take; e.g. <code>x=-100</code> means 100% (width).</li>
<li><code>text</code>: The name of the texture that is displayed.</li>
<li><code>alignment</code>: The alignment of the image.</li>
<li><code>offset</code>: offset in pixels from position.</li>
</ul>
<h2><a class="anchor" id="autotoc_md716"></a>
&lt;tt&gt;text&lt;/tt&gt;</h2>
<p>Displays text on the HUD.</p>
<ul>
<li><code>scale</code>: Defines the bounding rectangle of the text. A value such as <code>{x=100, y=100}</code> should work.</li>
<li><code>text</code>: The text to be displayed in the HUD element.</li>
<li><code>number</code>: An integer containing the RGB value of the color used to draw the text. Specify <code>0xFFFFFF</code> for white text, <code>0xFF0000</code> for red, and so on.</li>
<li><code>alignment</code>: The alignment of the text.</li>
<li><code>offset</code>: offset in pixels from position.</li>
</ul>
<h2><a class="anchor" id="autotoc_md717"></a>
&lt;tt&gt;statbar&lt;/tt&gt;</h2>
<p>Displays a horizontal bar made up of half-images.</p>
<ul>
<li><code>text</code>: The name of the texture that is used.</li>
<li><code>number</code>: The number of half-textures that are displayed. If odd, will end with a vertically center-split texture.</li>
<li><code>direction</code></li>
<li><code>offset</code>: offset in pixels from position.</li>
<li><code>size</code>: If used, will force full-image size to this value (override texture pack image size)</li>
</ul>
<h2><a class="anchor" id="autotoc_md718"></a>
&lt;tt&gt;inventory&lt;/tt&gt;</h2>
<ul>
<li><code>text</code>: The name of the inventory list to be displayed.</li>
<li><code>number</code>: Number of items in the inventory to be displayed.</li>
<li><code>item</code>: Position of item that is selected.</li>
<li><code>direction</code></li>
<li><code>offset</code>: offset in pixels from position.</li>
</ul>
<h2><a class="anchor" id="autotoc_md719"></a>
&lt;tt&gt;waypoint&lt;/tt&gt;</h2>
<p>Displays distance to selected world position.</p>
<ul>
<li><code>name</code>: The name of the waypoint.</li>
<li><code>text</code>: Distance suffix. Can be blank.</li>
<li><code>precision</code>: Waypoint precision, integer &gt;= 0. Defaults to 10. If set to 0, distance is not shown. Shown value is <code>floor(distance*precision)/precision</code>. When the precision is an integer multiple of 10, there will be <code>log_10(precision)</code> digits after the decimal point. <code>precision = 1000</code>, for example, will show 3 decimal places (eg: <code>0.999</code>). <code>precision = 2</code> will show multiples of <code>0.5</code>; precision = 5 will show multiples of <code>0.2</code> and so on: <code>precision = n</code> will show multiples of <code>1/n</code></li>
<li><code>number:</code> An integer containing the RGB value of the color used to draw the text.</li>
<li><code>world_pos</code>: World position of the waypoint.</li>
<li><code>offset</code>: offset in pixels from position.</li>
<li><code>alignment</code>: The alignment of the waypoint.</li>
</ul>
<h2><a class="anchor" id="autotoc_md720"></a>
&lt;tt&gt;image_waypoint&lt;/tt&gt;</h2>
<p>Same as <code>image</code>, but does not accept a <code>position</code>; the position is instead determined by <code>world_pos</code>, the world position of the waypoint.</p>
<ul>
<li><code>scale</code>: The scale of the image, with 1 being the original texture size. Only the X coordinate scale is used (positive values). Negative values represent that percentage of the screen it should take; e.g. <code>x=-100</code> means 100% (width).</li>
<li><code>text</code>: The name of the texture that is displayed.</li>
<li><code>alignment</code>: The alignment of the image.</li>
<li><code>world_pos</code>: World position of the waypoint.</li>
<li><code>offset</code>: offset in pixels from position.</li>
</ul>
<h2><a class="anchor" id="autotoc_md721"></a>
Particle definition (&lt;tt&gt;add_particle&lt;/tt&gt;)</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">    pos = {x=0, y=0, z=0},</div>
<div class="line">    velocity = {x=0, y=0, z=0},</div>
<div class="line">    acceleration = {x=0, y=0, z=0},</div>
<div class="line">    --  ^ Spawn particle at pos with velocity and acceleration</div>
<div class="line">    expirationtime = 1,</div>
<div class="line">    --  ^ Disappears after expirationtime seconds</div>
<div class="line">    size = 1,</div>
<div class="line">    collisiondetection = false,</div>
<div class="line">    --  ^ collisiondetection: if true collides with physical objects</div>
<div class="line">    collision_removal = false,</div>
<div class="line">    --  ^ collision_removal: if true then particle is removed when it collides,</div>
<div class="line">    --  ^ requires collisiondetection = true to have any effect</div>
<div class="line">    vertical = false,</div>
<div class="line">    --  ^ vertical: if true faces player using y axis only</div>
<div class="line">    texture = &quot;image.png&quot;,</div>
<div class="line">    --  ^ Uses texture (string)</div>
<div class="line">    animation = {Tile Animation definition},</div>
<div class="line">    --  ^ optional, specifies how to animate the particle texture</div>
<div class="line">    glow = 0</div>
<div class="line">    --  ^ optional, specify particle self-luminescence in darkness</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md722"></a>
&lt;tt&gt;ParticleSpawner&lt;/tt&gt; definition (&lt;tt&gt;add_particlespawner&lt;/tt&gt;)</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">    amount = 1,</div>
<div class="line">    time = 1,</div>
<div class="line">    --  ^ If time is 0 has infinite lifespan and spawns the amount on a per-second base</div>
<div class="line">    minpos = {x=0, y=0, z=0},</div>
<div class="line">    maxpos = {x=0, y=0, z=0},</div>
<div class="line">    minvel = {x=0, y=0, z=0},</div>
<div class="line">    maxvel = {x=0, y=0, z=0},</div>
<div class="line">    minacc = {x=0, y=0, z=0},</div>
<div class="line">    maxacc = {x=0, y=0, z=0},</div>
<div class="line">    minexptime = 1,</div>
<div class="line">    maxexptime = 1,</div>
<div class="line">    minsize = 1,</div>
<div class="line">    maxsize = 1,</div>
<div class="line">    --  ^ The particle&#39;s properties are random values in between the bounds:</div>
<div class="line">    --  ^ minpos/maxpos, minvel/maxvel (velocity), minacc/maxacc (acceleration),</div>
<div class="line">    --  ^ minsize/maxsize, minexptime/maxexptime (expirationtime)</div>
<div class="line">    collisiondetection = false,</div>
<div class="line">    --  ^ collisiondetection: if true uses collision detection</div>
<div class="line">    collision_removal = false,</div>
<div class="line">    --  ^ collision_removal: if true then particle is removed when it collides,</div>
<div class="line">    --  ^ requires collisiondetection = true to have any effect</div>
<div class="line">    vertical = false,</div>
<div class="line">    --  ^ vertical: if true faces player using y axis only</div>
<div class="line">    texture = &quot;image.png&quot;,</div>
<div class="line">    --  ^ Uses texture (string)</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
